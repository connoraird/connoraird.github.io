```{.mk code-line-numbers="-1|1-4|13,14|6-11|14,6-11|16-18"}
# Include PFUNIT.mk from a locally installed version of pFUnit
PFUNIT_INCLUDE_DIR ?= $(ROOT_DIR)/../pfunit/build/installed/PFUNIT-4.12/include
include $(PFUNIT_INCLUDE_DIR)/PFUNIT.mk
TEST_FLAGS = $(PFUNIT_EXTRA_FFLAGS) -I$(BUILD_DIR) $(FC_FLAGS) $(LIBS)

# Define variables to be picked up by make_pfunit_test
tests_TESTS = \
  test_something.pf \
  test_something_else.pf
tests_OTHER_SOURCES = $(filter-out $(BUILD_DIR)/main.o, $(SRC_OBJS))
tests_OTHER_LIBRARIES = $(TEST_FLAGS)

# Triggers pre-processing and defines rule for building test executable
$(eval $(call make_pfunit_test,tests))

# Converts pre-processed test files into objects ready for building of the executable
%.o: %.F90
	$(FC) -c $(TEST_FLAGS) $<
```
