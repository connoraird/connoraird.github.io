# Automated testing with pFUnit in CI (GitHub Actions)

## Automating with Docker

:::: {.r-fit-text}

To ensure a consitent environment when running pFUnit tests through GitHub
actions, one can make use of **Docker**…

- Within a single Dockerfile…
  - Install and build depenencies.
  - Build src and test objects and executables.
  - Run all tests.
- Building of slow changing dependencies, such as pFUnit, can be wrapped into a
  parent Dockerfile which is then built less frequently.
- Proprietary software can be difficult to build within Dockerfiles.

::: {.fragment}

See
[UCL-ARC/fortran-unit-testing-exercises](https://github.com/UCL-ARC/fortran-unit-testing-exercises)
for an example of this being used in practice

:::

::::

## Example Dockerfile

{{< include _components/pfunit_test_dockerfile.qmd >}}

## Example workflow

{{< include _components/pfunit_ci_workflow.qmd >}}
